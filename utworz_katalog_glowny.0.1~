#!/bin/bash -xv

#tworzy katalog dla danych uzyskanych z badania systemu
#w nim beda znajdowac sie wszytskie dane uzyskane z badania systemu
#aby katalogi sie nie powtarzaly nadajemy im oprocz nazwy numery
#format katalogu: nazwakatalogu_czasutc

#data w formacie UTC czyli liczba sekund od 1.1.1970
CZAS_OBECNY=$(date +%s)
#katalog w ktorym beda zapisane wszystkie wyniki z badania systemu
KATALOG_GLOWNY=~/DW/badanie # "$CZAS_OBECNY"

mkdir $KATALOG_GLOWNY && 
#tworzy podkatalogi
mkdir $KATALOG_GLOWNY/system_info &&
mkdir $KATALOG_GLOWNY/Users

#zapisuje do loga.
#jesli katalogi zostaly utworzone poprawnie
if [ $? -eq 0 ]
then	
	DATA=`date "+%y-%m-%d %H:%M:%S"`
	#zapisuje loga do DW/badanie
	echo $DATA "- Main folders created correct in " $KATALOG_GLOWNY  > $KATALOG_GLOWNY/log.txt
	#ustawia zmienna globalna. 
	#do tej sciezki beda odnosic sie wszystkie inne skrypty
	export $KATALOG_GLOWNY
else
	DATA=`date "+%y-%m-%d %H:%M:%S"`
	#zapisuje loga do DW
	echo $DATA "- Main folders NOT created correct in " $KATALOG_GLOWNY > ~/DW/log.txt
fi

